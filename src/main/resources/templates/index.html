<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>카페 주문 시스템</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap');

        body {
            font-family: 'Nanum Gothic', sans-serif;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            height: 100vh;
            margin: 0;
            padding: 20px;
            background-color: #3e2f2f;
            color: #fff;
            box-sizing: border-box;
            overflow: hidden; /* 스크롤바 숨김 */
        }
        .container {
            display: flex;
            flex-direction: column;
            height: 100%;
            justify-content: space-between;
            width: 45%;
        }
        .menu, .orders, .info {
            background-color: #3e2f2f;
            border: 2px solid #fff;
            border-radius: 8px;
            padding: 20px 30px;
            box-sizing: border-box;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        .menu h1, .orders h2, .info h2 {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #fff;
        }
        .menu ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .menu li {
            padding: 15px 0;
            border-bottom: 1px solid #fff;
            font-size: 2rem;
            text-align: right;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 0 30px;
        }
        .menu .ice, .menu .hot {
            margin-left: 10px;
        }
        .menu .ice {
            color: blue;
        }
        .menu .hot {
            color: red;
        }
        .order-number {
            font-size: 5rem;
            font-weight: bold;
            color: #d32f2f;
            text-align: center;
            margin-bottom: 20px;
        }
        .orders h2 {
            font-size: 3rem;
        }
        .orders .order-boxes {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        .order-box {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 10px 0;
            background: #5c4033;
            border-radius: 4px;
            width: 18%;
            text-align: center;
            padding: 20px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            color: #fff;
        }
        .info {
            margin-top: 20px;
            width: 100%;
        }
        .info h2 {
            font-size: 3rem;
        }
        .info div {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .info img {
            width: 50px;
            vertical-align: middle;
            margin-right: 10px;
        }
        .info span {
            vertical-align: middle;
            font-size: 2rem;
        }
        .right-section {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="menu">
        <h1>메뉴판</h1>
        <ul>
            <li><span>아메리카노</span><span><span class="ice">ICE</span>, <span class="hot">HOT</span> - 1,000원</span></li>
            <li><span>카푸치노</span><span><span class="ice">ICE</span>, <span class="hot">HOT</span> - 1,500원</span></li>
            <li><span>라떼</span><span><span class="ice">ICE</span>, <span class="hot">HOT</span> - 1,500원</span></li>
            <li><span>카페모카</span><span><span class="ice">ICE</span>, <span class="hot">HOT</span> - 1,500원</span></li>
            <li><span>카라멜 마끼야또</span><span><span class="ice">ICE</span>, <span class="hot">HOT</span> - 2,000원</span></li>
            <li><span>초코라떼</span><span><span class="ice">ICE</span>, <span class="hot">HOT</span> - 2,000원</span></li>
            <li><span>블루레몬에이드</span><span><span class="ice">ICE</span> - 2,000원</span></li>
            <li><span>녹차라떼</span><span><span class="ice">ICE</span>, <span class="hot">HOT</span> - 2,000원</span></li>
            <li><span>바닐라라떼</span><span><span class="ice">ICE</span>, <span class="hot">HOT</span> - 2,000원</span></li>
            <li><span>복숭아티</span><span><span class="ice">ICE</span> - 1,000원</span></li>
            <li><span>오설녹차</span><span><span class="hot">HOT</span> - 1,000원</span></li>
            <li><span>국화차</span><span><span class="hot">HOT</span> - 1,000원</span></li>
        </ul>
    </div>
</div>
<div class="right-section">
    <div class="orders">
        <h2>주문하신 음료 나왔습니다</h2>
        <div class="order-boxes completed-orders">
            <div class="order-box" id="completedOrder1">-</div>
            <div class="order-box" id="completedOrder2">-</div>
            <div class="order-box" id="completedOrder3">-</div>
            <div class="order-box" id="completedOrder4">-</div>
            <div class="order-box" id="completedOrder5">-</div>
        </div>
        <h2>대기 중인 주문</h2>
        <div class="order-boxes pending-orders">
            <div class="order-box" id="pendingOrder1">-</div>
            <div class="order-box" id="pendingOrder2">-</div>
            <div class="order-box" id="pendingOrder3">-</div>
            <div class="order-box" id="pendingOrder4">-</div>
            <div class="order-box" id="pendingOrder5">-</div>
        </div>
    </div>
    <div class="info">
        <h2>정보</h2>
        <div id="weather">
            <img src="weather-icon.png" alt="Weather Icon">
            <span>날씨 정보 로딩 중...</span>
        </div>
        <div id="airQuality">
            <img src="air-quality-icon.png" alt="Air Quality Icon">
            <span>미세먼지 정보 로딩 중...</span>
        </div>
        <div id="bibleVerse">
            <img src="bible-icon.png" alt="Bible Icon">
            <span>성경 구절 로딩 중...</span>
        </div>
    </div>
</div>

<audio id="notificationSound" src="notification.mp3" preload="auto"></audio>

<script>
    let previousCompletedOrders = [];

    document.addEventListener('DOMContentLoaded', () => {
        function fetchOrders() {
            fetch('/api/cafe/orders')
                .then(response => response.json())
                .then(data => {
                    // 대기 중인 주문
                    const pendingOrders = data.slice(0, 5);
                    for (let i = 0; i < 5; i++) {
                        document.getElementById(`pendingOrder${i + 1}`).textContent = pendingOrders[i] ? pendingOrders[i].orderId : '-';
                    }
                });

            fetch('/api/cafe/completed-orders')
                .then(response => response.json())
                .then(data => {
                    const completedOrders = data.slice(0, 5);
                    for (let i = 0; i < 5; i++) {
                        document.getElementById(`completedOrder${i + 1}`).textContent = completedOrders[i] ? completedOrders[i] : '-';
                    }
                    checkForNewOrders(completedOrders);
                });
        }

        function checkForNewOrders(currentOrders) {
            const newOrders = currentOrders.filter(order => !previousCompletedOrders.includes(order));
            if (newOrders.length > 0) {
                document.getElementById('notificationSound').play();
            }
            previousCompletedOrders = currentOrders;
        }

        function fetchWeather() {
            // 한국어로 된 날씨 API 사용 예시 (공공데이터 포털 활용)
            fetch('https://api.openweathermap.org/data/2.5/weather?q=Seoul&appid=YOUR_API_KEY&lang=kr')
                .then(response => response.json())
                .then(data => {
                    const weatherElement = document.getElementById('weather');
                    const icon = `http://openweathermap.org/img/wn/${data.weather[0].icon}.png`;
                    const description = data.weather[0].description;
                    const temp = (data.main.temp - 273.15).toFixed(1);
                    weatherElement.innerHTML = `<img src="${icon}" alt="Weather Icon"><span>${description}, ${temp}°C</span>`;
                });
        }

        function fetchAirQuality() {
            // 한국어로 된 미세먼지 API 사용 예시 (공공데이터 포털 활용)
            fetch('https://api.waqi.info/feed/seoul/?token=YOUR_API_KEY')
                .then(response => response.json())
                .then(data => {
                    const airQualityElement = document.getElementById('airQuality');
                    const aqi = data.data.aqi;
                    airQualityElement.innerHTML = `<img src="air-quality-icon.png" alt="Air Quality Icon"><span>미세먼지: ${aqi}</span>`;
                });
        }

        function fetchBibleVerse() {
            // 한국어로 된 성경 구절 API 사용 예시
            fetch('https://bible-api.com/random?translation=korHRV')
                .then(response => response.json())
                .then(data => {
                    const bibleVerseElement = document.getElementById('bibleVerse');
                    const verse = data.text;
                    const book = data.bookname;
                    const chapter = data.chapter;
                    const verseNumber = data.verse;
                    bibleVerseElement.innerHTML = `<img src="bible-icon.png" alt="Bible Icon"><span>${book} ${chapter}:${verseNumber} - ${verse}</span>`;
                });
        }

        setInterval(fetchOrders, 5000); // 5초마다 업데이트
        fetchWeather(); // 날씨 정보 가져오기
        fetchAirQuality(); // 미세먼지 정보 가져오기
        fetchBibleVerse(); // 성경 구절 가져오기
    });
</script>
</body>
</html>
